<div class="min-h-screen bg-gradient-to-br from-gray-50 to-gray-100">
  <!-- Header Component -->
  <app-header activeRoute="seances"></app-header>

  <!-- Main Content -->
  <div class="p-6 max-w-4xl mx-auto">
    <!-- Header -->
    <div class="mb-8">
      <div class="flex items-center justify-between">
        <div>
          <h1 class="text-3xl font-bold text-gray-900 flex items-center">
            <mat-icon class="mr-3 text-blue-600">edit</mat-icon>
            Modifier la Séance
          </h1>
          <p class="text-gray-600 mt-2">
            Modifiez les informations de votre séance d'entraînement
          </p>
        </div>
        <button
          (click)="onCancel()"
          class="inline-flex items-center px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-all duration-200 shadow-sm hover:shadow-md"
        >
          <mat-icon class="mr-2">arrow_back</mat-icon>
          Retour
        </button>
      </div>
    </div>

    <!-- Loading -->
    <div
      *ngIf="isLoading && !originalSeance"
      class="flex items-center justify-center py-12"
    >
      <mat-spinner diameter="40"></mat-spinner>
      <span class="ml-3 text-gray-600">Chargement de la séance...</span>
    </div>

    <!-- Success Message -->
    <div
      *ngIf="successMessage"
      class="bg-green-50 border border-green-200 rounded-xl p-4 mb-6 animate-pulse"
    >
      <div class="flex items-center">
        <mat-icon class="text-green-500 mr-3">check_circle</mat-icon>
        <span class="text-green-700 font-medium">{{ successMessage }}</span>
      </div>
    </div>

    <!-- Error Message -->
    <div
      *ngIf="errorMessage"
      class="bg-red-50 border border-red-200 rounded-xl p-4 mb-6 animate-pulse"
    >
      <div class="flex items-center">
        <mat-icon class="text-red-500 mr-3">error</mat-icon>
        <span class="text-red-700 font-medium">{{ errorMessage }}</span>
      </div>
    </div>

    <!-- Form Container -->
    <div
      *ngIf="!isLoading && originalSeance && !errorMessage"
      class="bg-white rounded-2xl border border-gray-200 shadow-lg overflow-hidden"
    >
      <!-- Form Header -->
      <div
        class="bg-gradient-to-r from-blue-50 to-indigo-50 px-6 py-4 border-b border-gray-200"
      >
        <h2 class="text-lg font-semibold text-gray-800 flex items-center">
          <mat-icon class="mr-2 text-blue-600">edit</mat-icon>
          Modification de la séance
        </h2>
      </div>

      <!-- Form -->
      <form [formGroup]="seanceForm" (ngSubmit)="onSubmit()" class="p-6">
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
          <!-- Left Column -->
          <div class="space-y-6">
            <!-- Label Field -->
            <div class="form-group">
              <label
                for="label"
                class="block text-sm font-semibold text-gray-700 mb-3"
              >
                Nom de la séance <span class="text-red-500">*</span>
              </label>
              <input
                type="text"
                id="label"
                formControlName="label"
                placeholder="Ex: Séance Upper Body"
                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 placeholder-gray-400"
              />
              <div
                *ngIf="
                  seanceForm.get('label')?.invalid &&
                  seanceForm.get('label')?.touched
                "
                class="mt-2 text-sm text-red-600"
              >
                {{ getFieldError("label") }}
              </div>
            </div>

            <!-- Category Field -->
            <div class="form-group">
              <label
                for="idCategorie"
                class="block text-sm font-semibold text-gray-700 mb-3"
              >
                Catégorie <span class="text-red-500">*</span>
              </label>
              <select
                id="idCategorie"
                formControlName="idCategorie"
                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-white"
              >
                <option value="" disabled>Choisissez une catégorie</option>
                <option
                  *ngFor="let categorie of categories"
                  [value]="categorie.id"
                >
                  {{ categorie.label }}
                </option>
              </select>
              <div
                *ngIf="
                  seanceForm.get('idCategorie')?.invalid &&
                  seanceForm.get('idCategorie')?.touched
                "
                class="mt-2 text-sm text-red-600"
              >
                {{ getFieldError("idCategorie") }}
              </div>
            </div>
          </div>

          <!-- Right Column -->
          <div class="space-y-6">
            <!-- Description Field -->
            <div class="form-group">
              <label
                for="description"
                class="block text-sm font-semibold text-gray-700 mb-3"
              >
                Description
              </label>
              <textarea
                id="description"
                formControlName="description"
                rows="8"
                placeholder="Décrivez les exercices, objectifs, intensité, matériel nécessaire..."
                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 placeholder-gray-400 resize-none"
              ></textarea>
            </div>

            <!-- Info Card -->
            <div class="bg-blue-50 border border-blue-200 rounded-xl p-4">
              <h3
                class="text-sm font-semibold text-blue-800 mb-2 flex items-center"
              >
                <svg
                  class="w-4 h-4 mr-2 text-blue-600"
                  fill="currentColor"
                  viewBox="0 0 20 20"
                >
                  <path
                    fill-rule="evenodd"
                    d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7.5 3.5a.5.5 0 01-1 0V9a.5.5 0 011 0v4.5zm0-6a.75.75 0 100-1.5.75.75 0 000 1.5z"
                    clip-rule="evenodd"
                  />
                </svg>
                Informations
              </h3>
              <ul class="text-sm text-blue-700 space-y-1">
                <li>• La date de création ne peut pas être modifiée</li>
                <li>
                  • Seuls le nom, la description et la catégorie peuvent être
                  modifiés
                </li>
                <li>• Les modifications sont sauvegardées immédiatement</li>
              </ul>
            </div>
          </div>
        </div>

        <!-- Action Buttons -->
        <div
          class="flex items-center justify-end space-x-4 pt-8 mt-8 border-t border-gray-200"
        >
          <button
            type="button"
            (click)="onCancel()"
            class="px-6 py-3 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 transition-all duration-200 font-medium"
            [disabled]="isLoading"
          >
            Annuler
          </button>
          <button
            type="submit"
            class="px-8 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-xl hover:from-blue-700 hover:to-indigo-700 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center font-medium shadow-lg hover:shadow-xl transform hover:-translate-y-0.5"
            [disabled]="seanceForm.invalid || isLoading"
          >
            <div
              *ngIf="isLoading"
              class="animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-3"
            ></div>
            {{ isLoading ? "Modification en cours..." : "Modifier la séance" }}
          </button>
        </div>
      </form>
    </div>
  </div>
</div>

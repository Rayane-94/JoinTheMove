<div class="register">
  <div class="register_form">
    <h2>Créer un compte</h2>
    
    <form [formGroup]="registerForm" (ngSubmit)="addUser()" class="register_form-container">
      
      <div class="input-group">
        <label for="nom">Nom</label>
        <input 
          type="text" 
          id="nom" 
          formControlName="nom" 
          class="input"
          placeholder="Entrez votre nom"
          [class.input-error]="registerForm.get('nom')?.invalid && registerForm.get('nom')?.touched"
        >
        <span class="error-message" *ngIf="registerForm.get('nom')?.invalid && registerForm.get('nom')?.touched">
          Le nom est obligatoire
        </span>
      </div>

      <div class="input-group">
        <label for="prenom">Prénom</label>
        <input 
          type="text" 
          id="prenom" 
          formControlName="prenom" 
          class="input"
          placeholder="Entrez votre prénom"
          [class.input-error]="registerForm.get('prenom')?.invalid && registerForm.get('prenom')?.touched"
        >
        <span class="error-message" *ngIf="registerForm.get('prenom')?.invalid && registerForm.get('prenom')?.touched">
          Le prénom est obligatoire
        </span>
      </div>

      <div class="input-group">
        <label for="email">Email</label>
        <input 
          type="email" 
          id="email" 
          formControlName="email" 
          class="input"
          placeholder="exemple@email.com"
          [class.input-error]="registerForm.get('email')?.invalid && registerForm.get('email')?.touched"
        >
        <span class="error-message" *ngIf="registerForm.get('email')?.invalid && registerForm.get('email')?.touched">
          <span *ngIf="registerForm.get('email')?.errors?.['required']">L'email est obligatoire</span>
          <span *ngIf="registerForm.get('email')?.errors?.['email']">L'email n'est pas valide</span>
        </span>
      </div>

      <div class="input-group">
        <label for="mdp">Mot de passe</label>
        <input 
          type="password" 
          id="mdp" 
          formControlName="mdp" 
          class="input"
          placeholder="Minimum 4 caractères"
          [class.input-error]="registerForm.get('mdp')?.invalid && registerForm.get('mdp')?.touched"
        >
        <span class="error-message" *ngIf="registerForm.get('mdp')?.invalid && registerForm.get('mdp')?.touched">
          <span *ngIf="registerForm.get('mdp')?.errors?.['required']">Le mot de passe est obligatoire</span>
          <span *ngIf="registerForm.get('mdp')?.errors?.['minlength']">
            Le mot de passe doit contenir au moins 4 caractères
          </span>
        </span>
      </div>

      <div class="input-group">
        <label for="confirmPassword">Confirmer le mot de passe</label>
        <input 
          type="password" 
          id="confirmPassword" 
          formControlName="confirmPassword" 
          class="input"
          placeholder="Confirmez votre mot de passe"
          [class.input-error]="registerForm.get('confirmPassword')?.invalid && registerForm.get('confirmPassword')?.touched"
        >
        <span class="error-message" *ngIf="registerForm.get('confirmPassword')?.invalid && registerForm.get('confirmPassword')?.touched">
          La confirmation est obligatoire
        </span>
      </div>

      <div class="input-group">
        <label for="role">Rôle</label>
        <select 
          id="role" 
          formControlName="role" 
          class="input"
        >
          <option value="user">Utilisateur</option>
          <option value="admin">Administrateur</option>
        </select>
      </div>

      <div class="register_error" *ngIf="registerForm.errors && registerForm.touched">
        {{ getErrorLabel }}
      </div>

      <button 
        type="submit" 
        class="btn-submit"
        [disabled]="registerForm.invalid"
      >
        S'inscrire
      </button>

      <p class="login-link">
        Déjà un compte ? 
        <a routerLink="/login">Se connecter</a>
      </p>
    </form>
  </div>
</div>
